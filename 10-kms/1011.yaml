Resources:
  TheKeyToSuccess:
    Type: AWS::KMS::Key
    Properties: 
      Description: Greyson Gundrum KMS Keys
      KeyPolicy:
        Id: cloudformation-key-policy
        Version: '2012-10-17'
        Statement:
        - Sid: Enable IAM User Permissions
          Effect: Allow
          Principal:
            AWS: arn:aws:iam::324320755747:root
          Action: kms:*
          Resource: "*"
        - Sid: Allow access for Key Administrators
          Effect: Allow
          Principal:
            AWS: arn:aws:iam::324320755747:user/greyson.gundrum.labs
          Action:
          - kms:Create*
          - kms:Describe*
          - kms:Enable*
          - kms:List*
          - kms:Put*
          - kms:Update*
          - kms:Revoke*
          - kms:Disable*
          - kms:Get*
          - kms:Delete*
          - kms:TagResource
          - kms:UntagResource
          - kms:ScheduleKeyDeletion
          - kms:CancelKeyDeletion
          Resource: "*"
        - Sid: Allow use of the key
          Effect: Allow
          Principal:
            AWS: arn:aws:iam::324320755747:user/greyson.gundrum.labs
          Action:
          - kms:Encrypt
          - kms:Decrypt
          - kms:ReEncrypt*
          - kms:GenerateDataKey*
          - kms:DescribeKey
          Resource: "*"
        - Sid: Allow attachment of persistent resources
          Effect: Allow
          Principal:
            AWS: arn:aws:iam::324320755747:user/greyson.gundrum.labs
          Action:
          - kms:CreateGrant
          - kms:ListGrants
          - kms:RevokeGrant
          Resource: "*"
          Condition:
            Bool:
              kms:GrantIsForAWSResource: 'true'
  SnazzyAlias:
    Type: AWS::KMS::Alias
    Properties: 
      AliasName: alias/mcsnazzyalias
      TargetKeyId: !Ref TheKeyToSuccess